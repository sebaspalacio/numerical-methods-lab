<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Numerical Methods Lab</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>
    :root{
      --ink:#0f172a; --blue:#1d4ed8; --ok:#16a34a; --warn:#f59e0b; --err:#dc2626;
      --muted:#64748b; --card:#fff; --bg:#f8fafc; --line:#e5e7eb;
    }
    body{background:var(--bg);color:var(--ink);}
    .card{background:var(--card);border:1px solid var(--line);border-radius:1rem;padding:1rem;}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:.6rem 1rem;border-radius:.75rem;font-weight:700}
    .btn-primary{background:var(--blue);color:#fff;}
    .btn-ghost{background:#e5edff;color:#1d4ed8;}
    .tab-on{background:var(--blue);color:#fff;} .tab-off{background:#eef2ff;color:#1e40af;}
    .badge{display:inline-flex;align-items:center;gap:.5rem;padding:.25rem .6rem;border-radius:.6rem;font-weight:700;}
    .badge-ok{background:#ecfdf5;color:var(--ok);border:1px solid #bbf7d0;}
    .badge-warn{background:#fff7ed;color:var(--warn);border:1px solid #fed7aa;}
    .badge-err{background:#fee2e2;color:var(--err);border:1px solid #fecaca;}
    .code{font-family:ui-monospace,Menlo,Consolas,monospace;}
    .w-ch{font-variant-numeric:tabular-nums;}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:1rem;}
    .grid-3{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1rem;}
    @media (max-width:1024px){.grid-2,.grid-3{grid-template-columns:1fr;}}
    .table-sm td,.table-sm th{padding:.35rem .5rem;border-bottom:1px solid var(--line);}
    .tabset button{padding:.35rem .7rem;border:1px solid var(--line);border-radius:.5rem;margin-right:.5rem;}
    .tabset .on{background:#e5edff;color:#1d4ed8;border-color:#c7d2fe;}
    .guide-card{background:#eef2ff;border:1px solid #c7d2fe;border-radius:1rem;padding:1.25rem;min-height:180px;display:flex;flex-direction:column;justify-content:center;}
    .guide-card h4{font-size:1.05rem;margin-bottom:.35rem;}
    .help-pane{background:#f8fafc;border:1px solid var(--line);border-radius:1rem;padding:1.25rem;width:100%;max-width:320px;box-shadow:0 12px 32px -24px rgba(15,23,42,.6);}
    .help-details{border:1px solid var(--line);border-radius:.75rem;padding:.6rem .8rem;background:#fff;}
    .help-details summary{cursor:pointer;font-weight:600;color:var(--blue);list-style:none;}
    .help-details summary::-webkit-details-marker{display:none;}
    .help-details[open]{border-color:#c7d2fe;background:#eef2ff55;}
    .help-body{margin-top:.45rem;font-size:.85rem;color:var(--muted);line-height:1.4;}
    #plot{pointer-events:auto;}
  </style>
</head>
<body>
  <header class="mx-auto max-w-6xl px-4 py-6">
    <h1 class="text-3xl font-bold">Numerical Methods Lab</h1>
    <p class="text-slate-600">Root Finding • Direct / Iterative Linear Systems • Interpolation</p>
  </header>

  <main class="mx-auto max-w-6xl px-4 pb-24">

    <!-- Workspaces -->
    <section class="card mb-4">
      <div class="flex flex-wrap gap-2">
        <button id="tabRoot" class="btn tab-on">Root Finding</button>
        <button id="tabDirect" class="btn tab-off">Direct Methods (Factorizations)</button>
        <button id="tabIter" class="btn tab-off">Iterative Methods</button>
        <button id="tabInterp" class="btn tab-off">Interpolation</button>
      </div>
    </section>

    <!-- Method selector -->
    <section class="card mb-6">
      <div class="flex flex-col gap-6 lg:flex-row">
        <div class="flex-1 space-y-4">
          <div class="grid gap-4 sm:grid-cols-2 xl:grid-cols-3">
            <div>
              <label class="block text-sm font-semibold mb-1">Method</label>
              <select id="method" class="w-full rounded-lg border p-2"></select>
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Quick actions</label>
              <div class="flex flex-wrap gap-2">
                <button id="runBtn" class="btn btn-primary" type="button">Run</button>
                <button id="clearBtn" class="btn btn-ghost" type="button">Clear</button>
              </div>
            </div>
            <div class="rounded-xl border border-blue-100 bg-blue-50/60 p-4 text-sm text-slate-600">
              Select a method to see personalized recommendations and suggested steps.
            </div>
          </div>
          <div id="methodGuide" class="guide-card"></div>
        </div>
        <aside class="help-pane">
          <h3 class="text-sm font-semibold uppercase tracking-wider text-slate-500">Input help</h3>
          <p class="text-sm text-slate-600 mt-1">Expand a section to recall how to enter your data.</p>
          <div class="mt-3 space-y-2">
            <details class="help-details" open>
              <summary>Functions</summary>
              <div class="help-body">
                Enter expressions such as <span class="code">x**3 - 7*x + 6</span> or <span class="code">x^3</span> (converted to <span class="code">**</span>). The helpers <span class="code">sin(x)</span>, <span class="code">cos(x)</span>, <span class="code">exp(x)</span>, <span class="code">log(x)</span>, <span class="code">sqrt(x)</span>, and <span class="code">PI</span> are available.
              </div>
            </details>
            <details class="help-details">
              <summary>Intervals &amp; numbers</summary>
              <div class="help-body">
                Use any order for <span class="code">a</span> and <span class="code">b</span>; the tool runs with <span class="code">[min(a,b), max(a,b)]</span>. Numbers accept scientific notation (<span class="code">1e-6</span>).
              </div>
            </details>
            <details class="help-details">
              <summary>Vectors</summary>
              <div class="help-body">
                Separate components with spaces or line breaks, for example <span class="code">1 2 3</span>. Match the size to your system.
              </div>
            </details>
            <details class="help-details">
              <summary>Matrices</summary>
              <div class="help-body">
                Paste rows separated by spaces or commas (<span class="code">4 -1 0</span>). With "Build" choose rows/columns and edit each cell; the text area stays synchronized.
              </div>
            </details>
            <details class="help-details">
              <summary>System messages</summary>
              <div class="help-body">
                Alerts appear as <span class="badge badge-ok">OK</span>, <span class="badge badge-warn">Recommendation</span>, or <span class="badge badge-err">Error</span> to guide you during execution.
              </div>
            </details>
          </div>
        </aside>
      </div>
    </section>

    <!-- Inputs & Status/Chart -->
    <section class="grid-2">
      <div class="card">
        <h3 class="text-lg font-semibold mb-2">Inputs</h3>
        <div id="inputs"></div>
      </div>
      <div class="card">
        <h3 class="text-lg font-semibold mb-2">Status & Chart</h3>
        <div id="status" class="mb-2"></div>
        <div id="plot" style="width:100%;height:440px;"></div>
      </div>
    </section>

    <!-- Outputs -->
    <section class="card mt-6">
      <h3 class="text-lg font-semibold mb-2">Outputs</h3>
      <div id="outputs" class="space-y-3 text-sm code w-ch"></div>
    </section>

    <!-- Iterations table -->
    <section class="card mt-6">
      <h3 class="text-lg font-semibold mb-2">Iteration table</h3>
      <div id="iters"></div>
    </section>

    <!-- History -->
    <section class="card mt-6">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold">History (recent runs)</h3>
        <button class="btn btn-ghost" type="button" id="clearHistory">Clear history</button>
      </div>
      <div id="history" class="mt-3"></div>
    </section>

  </main>

  <script src="app.js"></script>

</body>
</html>
